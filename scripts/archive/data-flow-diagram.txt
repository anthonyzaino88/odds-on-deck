# MLB & NFL Roster/Lineup Data Flow

## 🏈 MLB DATA FLOW

┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   MLB Games     │───▶│  MLB Stats API   │───▶│  Lineup Data    │
│   (Database)    │    │  (boxscore)      │    │  (Home/Away)    │
└─────────────────┘    └──────────────────┘    └─────────────────┘
         │                        │                        │
         │                        │                        ▼
         │                        │              ┌─────────────────┐
         │                        │              │  Player Storage │
         │                        │              │  (Player Table) │
         │                        │              └─────────────────┘
         │                        │                        │
         │                        │                        ▼
         │                        │              ┌─────────────────┐
         │                        │              │  Lineup Storage │
         │                        │              │  (Lineup Table) │
         │                        │              └─────────────────┘
         │                        │                        │
         │                        │                        ▼
         │                        │              ┌─────────────────┐
         │                        │              │  Player Props   │
         │                        │              │  Generation     │
         │                        │              └─────────────────┘

## 🏈 NFL DATA FLOW

┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   NFL Teams     │───▶│   ESPN API       │───▶│  Roster Data    │
│   (Database)    │    │  (team roster)   │    │  (All Players)  │
└─────────────────┘    └──────────────────┘    └─────────────────┘
         │                        │                        │
         │                        │                        ▼
         │                        │              ┌─────────────────┐
         │                        │              │  Player Storage │
         │                        │              │  (Player Table) │
         │                        │              └─────────────────┘
         │                        │                        │
         │                        │                        ▼
         │                        │              ┌─────────────────┐
         │                        │              │  Roster Storage │
         │                        │              │  (NFLRosterEntry)│
         │                        │              └─────────────────┘
         │                        │                        │
         │                        │                        ▼
         │                        │              ┌─────────────────┐
         │                        │              │  Depth Charts   │
         │                        │              │  & Positions    │
         │                        │              └─────────────────┘

## 🔄 AUTO-REFRESH SYSTEM

┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   Cron Jobs     │───▶│  Data Manager    │───▶│  API Calls      │
│   (Every 5-30m) │    │  (Centralized)   │    │  (MLB + NFL)    │
└─────────────────┘    └──────────────────┘    └─────────────────┘
         │                        │                        │
         │                        │                        ▼
         │                        │              ┌─────────────────┐
         │                        │              │  Data Storage   │
         │                        │              │  (Database)     │
         │                        │              └─────────────────┘
         │                        │                        │
         │                        │                        ▼
         │                        │              ┌─────────────────┐
         │                        │              │  Frontend       │
         │                        │              │  Updates        │
         │                        │              └─────────────────┘

## 📊 CURRENT STATUS

### MLB:
✅ Home team lineups (Toronto: 9 players)
⏳ Away team lineups (NYY: waiting for announcement)
✅ Player names and stats
✅ Auto-refresh every 5 minutes

### NFL:
✅ Team rosters (28 teams processed)
✅ Player data (names, positions, jerseys)
✅ Depth charts and position groups
⚠️ Game-specific starting lineups (limited)

## 🎯 KEY DIFFERENCES

### MLB:
- Game-specific lineups (batting order 1-9)
- Real-time lineup announcements
- Free API, no rate limits
- Lineups announced 1-2 hours before game

### NFL:
- Season-long rosters with depth charts
- Position groups (QB, RB, WR, etc.)
- Multiple API fallbacks
- Starting lineups determined by depth chart

