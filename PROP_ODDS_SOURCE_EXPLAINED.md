# üéØ Player Prop Odds: Real vs Generated

## TL;DR: **NO, prop thresholds are NOT from real odds data** ‚ùå

We are **generating our own prop lines** based on player stats and projections. The odds (-110, -115, -130) are **estimated standard values**, not pulled from sportsbooks.

---

## What We're Actually Doing

### Game Lines (Moneyline, Spreads, Totals) ‚úÖ **REAL ODDS**
**Source:** The-Odds-API (live data from sportsbooks)
- ‚úÖ Yankees ML: -150 (REAL from DraftKings, FanDuel, etc.)
- ‚úÖ Game Total O/U 8.5: -110 (REAL)
- ‚úÖ Run Line +1.5: -120 (REAL)

**Updated:** Every 15 minutes  
**Code:** `lib/vendors/odds.js` line 36
```javascript
const url = `${ODDS_API_BASE}/sports/${endpoint}/odds?regions=us&markets=h2h,spreads,totals&oddsFormat=american&apiKey=${apiKey}`
```

### Player Props (Hits, Strikeouts, Innings) ‚ùå **GENERATED BY US**
**Source:** Our own calculations based on player stats
- ‚ùå Aaron Judge O/U 1.5 hits: **We calculate the threshold**
- ‚ùå Pitcher O/U 5.5 strikeouts: **We estimate the line**
- ‚ùå O/U 2.5 earned runs: **We set this threshold**

**Why?**
The-Odds-API doesn't provide player prop odds in our subscription tier. We'd need to:
1. Upgrade to a premium tier ($$$)
2. Or scrape from sites like DraftKings, FanDuel, etc. (against ToS)

---

## How We Calculate Prop Thresholds

### Example: Pitcher Strikeouts

**Code:** `lib/player-props.js` lines 12-52

```javascript
function calculatePitcherStrikeoutThreshold(pitcher, opposingTeam) {
  // Start with default
  let threshold = 5.5;
  
  // Adjust based on pitcher's K% stats
  if (pitcher.splits && pitcher.splits.length > 0) {
    const recentSplit = pitcher.splits.sort((a, b) => b.season - a.season)[0];
    if (recentSplit && recentSplit.kRate) {
      // League average K% is around 22%
      const kRateAdjustment = (recentSplit.kRate - 0.22) * 10;
      threshold += kRateAdjustment;
    }
  }
  
  // Adjust for opposing team's strikeout tendency
  const teamAdjustments = {
    'LAD': -0.5,  // Good contact teams (lower threshold)
    'DET': 0.5,   // High strikeout teams (higher threshold)
  };
  
  threshold += teamAdjustments[opposingTeam.abbr] || 0;
  
  // Round to nearest 0.5
  threshold = Math.round(threshold * 2) / 2;
  return Math.max(3.5, Math.min(8.5, threshold));
}
```

**Result:** 
- A high-K% pitcher vs a strikeout-prone team = **7.5 K threshold**
- A low-K% pitcher vs a contact team = **4.5 K threshold**

### Example: Batter Hits

**Code:** `lib/player-props.js` lines 196-237

```javascript
function calculateBatterHitsThreshold(player, battingOrder, matchupResult = {}) {
  // Start with default
  let threshold = 1.5;
  
  // Top of order gets higher threshold
  if (battingOrder <= 3) {
    threshold += 0.1;  // 1.6 hits for leadoff
  }
  
  // Adjust based on player's wOBA
  if (player.splits && player.splits.length > 0) {
    const recentSplit = player.splits[0];
    if (recentSplit && recentSplit.wOBA) {
      // League average wOBA is .320
      const wobaAdjustment = (recentSplit.wOBA - 0.320) * 2;
      threshold += wobaAdjustment;
    }
  }
  
  // Apply matchup advantage
  if (matchupResult.advantage === 'batter') {
    threshold += 0.1;  // Easier matchup
  }
  
  // Round to nearest 0.5
  threshold = Math.round(threshold * 2) / 2;
  return Math.max(0.5, Math.min(2.5, threshold));
}
```

**Result:**
- Elite hitter (Aaron Judge) in top of order = **2.0 hits threshold**
- Weak hitter in bottom of order = **1.0 hits threshold**

---

## Hardcoded Odds Values

**Code:** `lib/player-props.js` lines 420-478

```javascript
const pitchingProps = [
  {
    type: 'strikeouts',
    threshold: calculatePitcherStrikeoutThreshold(pitcher, game.home),
    odds: -115,  // ‚ö†Ô∏è HARDCODED - NOT REAL
    probability: 0.53,
    edge: 0.07
  },
  {
    type: 'earned_runs',
    threshold: 2.5,  // ‚ö†Ô∏è HARDCODED THRESHOLD
    odds: -130,      // ‚ö†Ô∏è HARDCODED ODDS
    probability: 0.57
  },
  {
    type: 'innings_pitched',
    threshold: 5.5,  // ‚ö†Ô∏è HARDCODED THRESHOLD
    odds: -110,      // ‚ö†Ô∏è HARDCODED ODDS
    probability: 0.52
  }
]
```

**Batter props:**
```javascript
const playerProps = [
  {
    type: 'hits',
    odds: -110,  // ‚ö†Ô∏è STANDARD ODDS (not real)
    threshold: calculateBatterHitsThreshold(player, lineup.battingOrder)
  },
  {
    type: 'total_bases',
    odds: -120,  // ‚ö†Ô∏è STANDARD ODDS (not real)
    threshold: 2.5  // ‚ö†Ô∏è FIXED THRESHOLD
  }
]
```

---

## The Problem

### What Sportsbooks ACTUALLY Offer:
```
DraftKings:
Aaron Judge Total Hits
Over 1.5  (-135)  ‚Üê REAL ODDS, REAL THRESHOLD
Under 1.5 (+115)

Aaron Judge Total Strikeouts
Over 0.5  (+170)  ‚Üê DIFFERENT THRESHOLD
Under 0.5 (-210)

Gerrit Cole Strikeouts
Over 6.5  (-115)  ‚Üê REAL THRESHOLD
Under 6.5 (-105)
```

### What We're Showing:
```
Our System:
Aaron Judge Total Hits
Over 1.8  (-110)  ‚Üê OUR CALCULATED THRESHOLD, ESTIMATED ODDS

Gerrit Cole Strikeouts
Over 5.5  (-115)  ‚Üê OUR CALCULATED THRESHOLD, ESTIMATED ODDS
```

**The mismatch:**
- ‚úÖ **Our edge calculation is valid** (if our projection is accurate)
- ‚ùå **Our threshold might be wrong** (5.5 K vs actual 6.5 K line)
- ‚ùå **Our odds are generic** (-110 vs actual -135)
- ‚ùå **Can't actually bet these lines** (they don't exist at sportsbooks!)

---

## Impact on Your Betting

### Current System Says:
```
Aaron Judge Hits OVER 1.8
Edge: 8.2%
Odds: -110
Projection: 2.1 hits

YOU THINK: "Great, I'll bet Judge O1.8 at -110!"
```

### Reality at Sportsbook:
```
DraftKings:
Aaron Judge Hits O/U 1.5 (-135/-105)
Aaron Judge Hits O/U 2.5 (+180/-220)

YOU REALIZE: "There's no 1.8 line available!"
```

### What You Actually Need to Do:
1. See our system says Judge projects 2.1 hits
2. Go to DraftKings
3. Find Judge hits line (likely O/U 1.5 or 2.5)
4. Manually decide if Judge O1.5 at -135 is +EV based on our 2.1 projection
5. Calculate your own edge for the ACTUAL line

---

## Solutions (In Order of Feasibility)

### Option 1: **Add Disclaimer** ‚ö° Easy (5 min)
Add text to prop display:
```
‚ö†Ô∏è Note: Thresholds and odds are model projections, not live sportsbook lines.
Use our projections to evaluate real lines at your sportsbook.
```

### Option 2: **Upgrade The-Odds-API** üí∞ Medium ($$$, 1 hour)
- Cost: ~$50-100/month
- Get real prop lines from sportsbooks
- Still limited markets/props available

### Option 3: **Manual Line Entry** üõ†Ô∏è Medium (2-3 hours)
- Add UI for users to enter actual lines they find
- Compare our projection vs their actual line
- Calculate real edge for real bets

### Option 4: **Scrape Sportsbook Sites** ‚ö†Ô∏è Hard (against ToS)
- Technically possible but violates terms of service
- Risk of getting banned/sued
- Not recommended

### Option 5: **Partner with Odds Provider** ü§ù Hard (business deal)
- Partner with Odds Jam, Unabated, etc.
- Get prop odds feed
- Expensive but comprehensive

---

## Recommended Immediate Action

**Add this to your prop display NOW:**

```jsx
<div className="bg-yellow-50 border-l-4 border-yellow-400 p-3 mb-4">
  <div className="flex">
    <div className="flex-shrink-0">
      <svg className="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor">
        <path fillRule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clipRule="evenodd"/>
      </svg>
    </div>
    <div className="ml-3">
      <p className="text-sm text-yellow-700">
        <strong>Model Projections:</strong> Thresholds and odds shown are our calculated projections, 
        not live sportsbook lines. Use these projections to evaluate the actual lines available at your sportsbook.
      </p>
    </div>
  </div>
</div>
```

---

## Bottom Line

**Game odds (ML, spreads, totals):** ‚úÖ **100% REAL from sportsbooks**  
**Player prop thresholds:** ‚ùå **Generated by our model**  
**Player prop odds:** ‚ùå **Estimated standard values (-110, -115)**

**This is still valuable!** Your projections help identify which props to look for, but users need to:
1. See your projection (Judge: 2.1 hits projected)
2. Go find the actual line at their sportsbook (Judge O/U 1.5 at -135)
3. Calculate if the actual line is +EV based on your projection

Would you like me to:
1. Add the disclaimer to the prop displays?
2. Modify props to show "Projection" instead of "Line"?
3. Add a feature to enter actual sportsbook lines for comparison?



